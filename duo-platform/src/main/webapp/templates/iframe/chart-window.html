<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="context-path" th:content="@{/}"/>
        <title>选择窗口</title>
        <!-- favicon icon -->
        <link rel="icon" type="image/png" th:href="@{/static/img/favicon.ico}">
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
         <!-- Bootstrap 3.3.7 -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}">
        <!-- x-editable-->
        <link rel="stylesheet" th:href="@{/static/libs/x-editable/bootstrap3-editable/css/bootstrap-editable.css}">
        <!-- Font Awesome -->
        <link rel="stylesheet" th:href="@{/static/css/font-awesome.min.css}">
        <!-- Ionicons -->
        <link rel="stylesheet" th:href="@{/static/css/ionicons.min.css}">
        <!-- Select -->
        <link rel="stylesheet" th:href="@{/static/libs/select/bootstrap-select.min.css}">
        <!-- Select2 -->
        <link rel="stylesheet" th:href="@{/static/css/select2.min.css}">
        <!-- Theme style -->
        <link rel="stylesheet" th:href="@{/static/css/AdminLTE.min.css}">
        <!-- Pace style -->
        <link rel="stylesheet" th:href="@{/static/css/pace.min.css}">
        <!-- zTree style -->
        <link rel="stylesheet" th:href="@{/static/css/ztree/metroStyle/metroStyle.css}">
        <!-- Bootstrap-table -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-table.min.css}">
        <!-- Bootstrap-table -->
        <!--<link rel="stylesheet" th:href="@{/static/libs/bootstrap-table/bootstrap-table.css}">-->
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.css}">
        <!-- Animate -->
        <link rel="stylesheet" th:href="@{/static/css/animate.min.css}">
        <!-- daterange picker -->
        <link rel="stylesheet" th:href="@{/static/css/daterangepicker.css}">
        <!-- bootstrap datepicker -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-datepicker.min.css}">
        <!-- Bootstrap Color Picker -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-colorpicker.min.css}">
        <!-- Bootstrap time Picker -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-timepicker.min.css}">
        <!-- iCheck -->
        <link rel="stylesheet" th:href="@{/static/css/iCheck/square/blue.css}">
        <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->
        <link rel="stylesheet" th:href="@{/static/css/skins/_all-skins.min.css}">

        <!-- bootstrap3-dialog  -->
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap3-dialog/css/bootstrap-dialog.min.css}">
        <!-- sweetalert  -->
        <link rel="stylesheet" th:href="@{/static/css/sweetalert.css}">
        <!-- 自定义样式 -->
        <link rel="stylesheet" th:href="@{/static/css/admin.css?v=1.0.1}">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script th:inline="javascript" th:src="@{/static/libs/html5shiv/html5shiv.min.js}"></script>
        <script th:inline="javascript" th:src="@{/static/libs/html5shiv/respond.min.js}"></script>
        <![endif]-->
        <script th:inline="javascript">
            var CONTEXT_PATH = [[${#request.getContextPath()}]];
        </script>
        <!-- Google Font -->
        <!--<link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">-->
<style>

    .sidebar-menu >div> li > a {
        padding: 5px 5px 5px 15px;
        display: block;
    }

    .sidebar-menu >div> li > a > .fa,
    .sidebar-menu >div> li > a > .glyphicon,
    .sidebar-menu >div> li > a > .ion {
        width: 20px;
    }
    html,body{
        height: 100%;
    }
</style>
        <!--Fortmatter方法 -->
        <script th:replace="~{../project/common/common-data-formatter :: formatterScript}"></script>
    </head>
    <body>
             <!--Content Wrapper. Contains page content-->
            <div class="box-body" id="content-wrapper" >
                <div th:replace="~{../project/duo-studio/chart :: formPage}"></div>
            </div>
    </body>
    <!-- jQuery 3 -->
    <script th:src="@{/static/libs/jquery/jquery-2.2.4.min.js}"></script>
    <!-- easyui-->
    <script th:src="@{/static/libs/easyui1.8.3/jquery.easyui.min.js}"></script>
    <!-- Bootstrap-table -->
    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/bootstrap-table.min.js}"></script>
    <!--<script th:src="@{/static/libs/bootstrap-table-v1.11.1/extensions/editable/bootstrap-table-editable.min.js}"></script>-->
    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/locale/bootstrap-table-zh-CN.min.js}"></script>

    <!-- Bootstrap 3.3.7 -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-v3.3.7.min.js}"></script>

    <!--<script th:src="@{/static/libs/bootstrap-table/bootstrap-table.min.js}"></script>-->
    <!--<script th:src="@{/static/libs/bootstrap-table/bootstrap-table-edit.min.js}"></script>-->
    <!--<script th:src="@{/static/libs/bootstrap-table/bootstrap-table-zh-CN.min.js}"></script>-->
    <script th:src="@{/static/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js}"></script>
    <script th:src="@{/static/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.zh-CN.js}"></script>
    <!--<script th:src="@{/static/libs/bootstrap-table/bootstrap-select.js}"></script>-->
    <!-- x-eidtable -->
 <!--<script th:src="@{/static/libs/x-editable/bootstrap3-editable/js/bootstrap-editable.js}"></script>-->
    <!-- SlimScroll -->
    <script th:src="@{/static/libs/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
    <!-- FastClick -->
    <script th:src="@{/static/libs/fastclick.js}"></script>
    <!-- AdminLTE App -->
    <script th:src="@{/static/libs/adminlte/adminlte.min.js}"></script>
    <!-- Select -->
    <script th:src="@{/static/libs/select/bootstrap-select.min.js}"></script>
    <!-- Select2 -->
    <script th:src="@{/static/libs/select2/select2.full.min.js}"></script>
    <!-- InputMask -->
    <script th:src="@{/static/libs/jquery-inputmask/jquery.inputmask.js}"></script>
    <script th:src="@{/static/libs/jquery-inputmask/jquery.inputmask.date.extensions.js}"></script>
    <script th:src="@{/static/libs/jquery-inputmask/jquery.inputmask.extensions.js}"></script>
    <!-- date-range-picker -->
    <script th:src="@{/static/libs/moment.min.js}"></script>
    <script th:src="@{/static/libs/daterangepicker.js}"></script>
    <!-- My97DatePicker -->
    <script th:src="@{/static/libs/datepicker/WdatePicker.js}"></script>

    <!-- bootstrap3-dialog  -->
    <script th:src="@{/static/libs/bootstrap3-dialog/js/bootstrap-dialog.min.js}"></script>
    <!-- bootstrap datepicker -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-datepicker.min.js}"></script>
    <!-- bootstrap color picker -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-colorpicker.min.js}"></script>
    <!-- bootstrap time picker -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-timepicker.min.js}"></script>
    <!-- SlimScroll -->
    <script th:src="@{/static/libs/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
    <!-- PACE -->
    <script th:src="@{/static/libs/pace.min.js}"></script>
    <!-- zTree script -->
    <script th:src="@{/static/libs/jquery-ztree/jquery.ztree.all.min.js}"></script>
        <!--<script th:src="@{/static/libs/bootstrap-editable/bootstrap-table-edit.js}"></script>-->
    <!-- Bootstrap-notify-3.1.3 -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-notify.min.js}"></script>
    <!-- Bootstrap-validator-0.11.9 -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-validator.min.js}"></script>
    <!-- iCheck -->
    <script th:src="@{/static/libs/iCheck/icheck.min.js}"></script>
    <!-- AdminLTE for menu purposes -->
    <script th:src="@{/static/js/right-menu-color.js}"></script>

    <script th:src="@{/static/js/admin.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/static/js/common/utils.js?v=1.0.1}"></script>

    <script th:src="@{/project/common/common-editable.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/project/common/common-formatter.js?v=1.0.1}" th:inline="javascript"></script>
    <script th:src="@{/project/common/common-function.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/project/common/common-chart.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/static/libs/echart4.7.0/echarts.common.min.js}"></script>
    <script th:src="@{/static/libs/echart4.7.0/echarts.min.js}"></script>
    <script th:inline="javascript">
        var height= [[${height}]];
        var chartID= [[${chartID}]];

        var CURRENTUSERID = [[${CURRENTUSERID}]];
        var CURRENTDEPTID = [[${CURRENTDEPTID}]];
        var CURRENTCOMPANYID = [[${CURRENTCOMPANYID}]];
        var CURRENTONEDEPTID = [[${CURRENTONEDEPTID}]];
        var CURRENTTWODEPTID = [[${CURRENTTWODEPTID}]];

        $(function () {
            $('#content-wrapper').height(height);
            viewChartLine(chartID);
        });



        function viewChart(obj,chartId){
            var callback= function(result){
                if(result.success) {
                    // alert(result.data);
                    eval("var data=" + result.data + ";");
                    //指定图标的配置和数据
                    var option = {};
                    if (data.chartType == "default") {
                        option = {
                            title: {
                                text: '图表例子',
                                subtext: ' ',
                                left: '50%',
                                textAlign: 'center'
                            },
                            color: ['#003366', '#006699', '#4cabce', '#e5323e'],
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'shadow'
                                }
                            },
                            xAxis: {
                                type: 'category',
                                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                            },
                            yAxis: [
                                {
                                    type: 'value',
                                    name: '水量',
                                    min: 0,
                                    max: 900,
                                    interval: 100,
                                    axisLabel: {
                                        formatter: '{value} ml'
                                    }
                                },
                                {
                                    type: 'value',
                                    name: '温度',
                                    min: 0,
                                    max: 45,
                                    interval: 5,
                                    axisLabel: {
                                        formatter: '{value} °C'
                                    }
                                }
                            ],
                            toolbox: {
                                show: true,
                                orient: 'vertical',
                                left: 'right',
                                top: 'center',
                                feature: {
                                    mark: {show: true},
                                    dataView: {show: false, readOnly: false},
                                    magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            legend: {
                                //orient: 'vertical',
                                x: 'center',
                                y: 'top',
                                padding: [30, 50, 0, 0],
                                data: ['Forest', 'Forest1', '温度']
                            },
                            series: [{
                                name: '温度',
                                type: 'line',
                                yAxisIndex: 1,
                                z: 10,
                                label: labelOption2,
                                barGap: 0,
                                data: [12, 20, 30, 30, 25, 33, 40]
                            },
                                {
                                    name: 'Forest',
                                    type: 'bar',
                                    label: labelOption1,
                                    stack: '搜索引擎',
                                    barGap: 0,
                                    data: [120, 300, 150, 80, 70, 120, 150]
                                },
                                {
                                    name: 'Forest1',
                                    type: 'bar',
                                    label: labelOption1,
                                    stack: '搜索引擎',
                                    barGap: 0,
                                    data: [120, 300, 150, 80, 70, 120, 150]
                                }]
                        };
                        option.title.text=data.title;
                        option.title.subtext=data.subtext;
                        eval("option.xAxis.data="+data.xdata+";");
                        if(data["color"]!=null)  eval("option.color="+data.color+";");
                        option.toolbox.show=data.toolbox;
                        eval("option.legend.data="+data.legend+";");
                        //  alert(data.yAxis);
                        eval("option.yAxis="+data.yAxis+";");
                        eval("option.series="+data.series+";");
                        for(var i=0;i< option.series.length;i++){
                            // alert(option.series[i].data);
                            eval("option.series[i].data="+option.series[i].data);
                            if(option.series[i].label!=null&&option.series[i].label!="") eval("option.series[i].label="+option.series[i].label);
                        }

                    }else if(data.chartType == "pie"){
                        option = {
                            title: {
                                text: '图表例子',
                                subtext: ' ',
                                left: '50%',
                                textAlign: 'center'
                            },
                            tooltip: {
                                trigger: 'item',
                                formatter: '{a} <br/>{b}: {c} ({d}%)'
                            },
                            legend: {
                                orient: 'vertical',
                                left: 10,
                                data: ['直达', '营销广告', '搜索引擎', '邮件营销', '联盟广告', '视频广告', '百度', '谷歌', '必应', '其他']
                            },
                            series: [
                                {
                                    "name": '访问来源',
                                    type: 'pie',
                                    selectedMode: 'single',
                                    radius: [0, '45%'],
                                    label: {
                                        position: 'inner'
                                    },
                                    data: [
                                        {value: 335, name: '直达', selected: true},
                                        {value: 679, name: '营销广告'},
                                        {value: 1548, name: '搜索引擎'}
                                    ]
                                },
                                {
                                    name: '访问来源',
                                    type: 'pie',
                                    selectedMode: 'single',
                                    radius: ['60%', '85%'],
                                    label:labelOption3 ,
                                    data: [
                                        {value: 335, name: '直达'},
                                        {value: 310, name: '邮件营销'},
                                        {value: 234, name: '联盟广告'},
                                        {value: 135, name: '视频广告'},
                                        {value: 1048, name: '百度'},
                                        {value: 251, name: '谷歌'},
                                        {value: 147, name: '必应'},
                                        {value: 102, name: '其他'}
                                    ]
                                }
                            ]
                        };
                        option.title.text=data.title;
                        option.title.subtext=data.subtext;
                        eval("option.legend.data="+data.legend+";");
                        eval("option.series="+data.series+";");
                        for(var i=0;i< option.series.length;i++){
                            // alert("option.series[i].data="+option.series[i].data);
                            eval("option.series[i].radius="+option.series[i].radius);
                            eval("option.series[i].data="+option.series[i].data);
                            if(option.series[i].label!=null&&option.series[i].label!="") eval("option.series[i].label="+option.series[i].label);
                        }
                    }else if(data.chartType == "gauge"){
                        option = {
                            title: {
                                text: '图表例子',
                                subtext: ' ',
                                left: '50%',
                                textAlign: 'center'
                            },
                            tooltip: {
                                formatter: '{a} <br/>{b} : {c}%'
                            },
                            toolbox: {
                                feature: {
                                    restore: {},
                                    saveAsImage: {}
                                }
                            },
                            series: [
                                {
                                    name: '业务指标',
                                    type: 'gauge',
                                    detail: {formatter: '{value}%'},
                                    data: [{value: 50, name: '完成率'}]
                                }
                            ]
                        };
                        option.title.text=data.title;
                        option.title.subtext=data.subtext;

                        eval("option.series="+data.series+";");
                        for(var i=0;i< option.series.length;i++){
                            // alert("option.series[i].data="+option.series[i].data);
                            eval("option.series[i].data="+option.series[i].data);
                            option.series[i]["detail"]={formatter: '{value}%'};
                        }
                    }
                    //初始化echarts实例
                    var myChart = echarts.init(document.getElementById('chartmain'));

                    //使用制定的配置项和数据显示图表
                    myChart.setOption(option);

                    // myChart.on('click', function (params) {
                    //     alert("单击了"+params.value);
                    // });
                }
            }
            ajaxSumit("/common/chart",{chartId:chartId},callback);
            $(obj).height(document.body.clientHeight);
        }


    </script>

</html>