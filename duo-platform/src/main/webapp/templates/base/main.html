<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:duo=""
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="context-path" th:content="@{/}"/>
        <title>[[${ProjectSystemName}]]</title>
        <!-- favicon icon -->
        <link rel="icon" type="image/png" th:href="@{/static/img/favicon.ico}">
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
         <!-- Bootstrap 3.3.7 -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}">
        <!-- x-editable-->
        <link rel="stylesheet" th:href="@{/static/libs/x-editable/bootstrap3-editable/css/bootstrap-editable.css}">
        <!-- Font Awesome 4.7.0 -->
        <link rel="stylesheet" th:href="@{/static/css/font-awesome.min.css}">
        <!-- Ionicons -->
        <link rel="stylesheet" th:href="@{/static/css/ionicons.min.css}">
        <!-- Select -->
        <link rel="stylesheet" th:href="@{/static/libs/select/bootstrap-select.min.css}">
        <!-- Select2 -->
        <link rel="stylesheet" th:href="@{/static/css/select2.min.css}">
        <!-- Theme style -->
        <link rel="stylesheet" th:href="@{/static/css/AdminLTE.min.css}">
        <!-- Pace style -->
        <link rel="stylesheet" th:href="@{/static/css/pace.min.css}">
        <!-- zTree style -->
        <link rel="stylesheet" th:href="@{/static/css/ztree/metroStyle/metroStyle.css}">
        <!-- Bootstrap-table -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-table.min.css}">
        <!-- Bbootstrap-validator-v0.5.3-->
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap-validator-v0.5.3/css/bootstrapValidator.min.css}">
        <!-- bootstrap-switch-v3.3.5-->
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap-switch-v3.3.5/css/bootstrap3/bootstrap-switch.min.css}">
        <!-- Bootstrap-table -->
        <!--<link rel="stylesheet" th:href="@{/static/libs/bootstrap-table/bootstrap-table.css}">-->
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.css}">
        <!-- Animate -->
        <link rel="stylesheet" th:href="@{/static/css/animate.min.css}">
        <!-- daterange picker -->
        <link rel="stylesheet" th:href="@{/static/css/daterangepicker.css}">
        <!-- bootstrap datepicker -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-datepicker.min.css}">
        <!-- Bootstrap Color Picker -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-colorpicker.min.css}">
        <!-- Bootstrap time Picker -->
        <link rel="stylesheet" th:href="@{/static/css/bootstrap-timepicker.min.css}">
        <!-- iCheck -->
        <link rel="stylesheet" th:href="@{/static/css/iCheck/square/blue.css}">
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap-table-v1.11.1/extensions/fixed-columns/css/bootstrap-table-fixed-columns.css}">
        <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->
        <link rel="stylesheet" th:href="@{/static/css/skins/_all-skins.min.css}">

        <!-- bootstrap3-dialog  -->
        <link rel="stylesheet" th:href="@{/static/libs/bootstrap3-dialog/css/bootstrap-dialog.min.css}">
        <!-- sweetalert  -->
        <link rel="stylesheet" th:href="@{/static/css/sweetalert.css}">
        <link rel="stylesheet" th:href="@{/static/libs/jquery-editable-select/jquery.editable-select.min.css}">
        <link rel="stylesheet" th:href="@{/static/libs/jquery-uploadifive/uploadifive.css}">
        <link rel="stylesheet" th:href="@{/static/libs/jqFullCalendar/css/fullcalendar.min.css}">
        <link rel="stylesheet" th:href="@{/static/libs/jquery-liMarquee/css/liMarquee.css}">
        <!-- 自定义样式 -->
        <link rel="stylesheet" th:href="@{/static/css/admin.css?v=1.0.1}">

    <style>
        .sidebar-menu >div> li > a {
            padding: 5px 5px 5px 15px;
            display: block;
        }

        .sidebar-menu >div> li > a > .fa,
        .sidebar-menu >div> li > a > .glyphicon,
        .sidebar-menu >div> li > a > .ion {
            width: 20px;
        }

        html,body{
            height: 100%;
        }
        .treeview .oneMenu{
            font-weight:500;
            font-size:15px;
        }
       .btnselected{
           background: #58a6c2;
           color:#fff;
        }


    </style>

    <!-- jQuery 2 -->
    <script th:src="@{/static/libs/jquery/jquery-2.2.4.min.js}"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script th:inline="javascript" th:src="@{/static/libs/html5shiv/html5shiv.min.js}"></script>
    <script th:inline="javascript" th:src="@{/static/libs/html5shiv/respond.min.js}"></script>

    <![endif]-->
    <script th:inline="javascript">
        var CONTEXT_PATH = [[${#request.getContextPath()}]];
    </script>
    <!-- Google Font -->
    <!--<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">-->
        <!--Fortmatter方法 -->
    <script th:replace="~{../project/common/common-data-formatter :: formatterScript}"></script>
    </head>
    <body class="hold-transition skin-blue sidebar-mini fixed" style="overflow:hidden;">
        <!-- SXssHttpServletRequestWrapperpper -->
        <div class="wrapper">
            <div th:replace="~{base/main-header :: header}" > </div>

            <div th:replace="~{base/main-menu-sidebar :: main-sidebar}"> </div>
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper" id="content-wrapper">
<!--                <div th:replace="~{base/home :: home-wrapper}"> </div>-->
            </div>
            <!-- /.contXssHttpServletRequestWrapperpper -->

            <div th:replace="~{base/main-footer :: main-footer}"> </div>

            <div th:replace="~{base/main-right-sidebar :: control-sidebar}"> </div>

            <!-- Add the sidebar's background. This div must be placed
                 immediately after the control sidebar -->
            <div class="control-sidebar-bg"></div>
        </div>

        <div th:replace="../project/common/common-modal :: CommonWindowModal"></div>

        <!-XssHttpServletRequestWrapperpper -->
    <!-- easyui-->
    <script th:src="@{/static/libs/easyui1.8.3/jquery.easyui.min.js}"></script>
    <!-- Bootstrap-table -->
    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/bootstrap-table.min.js}"></script>
    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/locale/bootstrap-table-zh-CN.min.js}"></script>

    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/extensions/export/bootstrap-table-export.min.js}"></script>
    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/extensions/export/tableExport.js}"></script>
    <!-- Bootstrap 3.3.7 -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-v3.3.7.min.js}"></script>
    <script th:src="@{/static/libs/bootstrap-table-v1.11.1/extensions/fixed-columns/js/bootstrap-table-fixed-columns.js}"></script>

    <script th:src="@{/static/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js}"></script>
    <script th:src="@{/static/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.zh-CN.js}"></script>
    <!-- SlimScroll -->
    <script th:src="@{/static/libs/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
    <!-- FastClick -->
    <script th:src="@{/static/libs/fastclick.js}"></script>
    <!-- AdminLTE App -->
    <script th:src="@{/static/libs/adminlte/adminlte.min.js}"></script>
    <!-- Select -->
    <script th:src="@{/static/libs/select/bootstrap-select.min.js}"></script>
    <!-- Select2 -->
    <script th:src="@{/static/libs/select2/select2.full.min.js}"></script>
    <!-- InputMask -->
    <script th:src="@{/static/libs/jquery-inputmask/jquery.inputmask.js}"></script>
    <script th:src="@{/static/libs/jquery-inputmask/jquery.inputmask.date.extensions.js}"></script>
    <script th:src="@{/static/libs/jquery-inputmask/jquery.inputmask.extensions.js}"></script>
    <!-- date-range-picker -->
    <script th:src="@{/static/libs/moment.min.js}"></script>
    <script th:src="@{/static/libs/daterangepicker.js}"></script>
    <!-- My97DatePicker -->
    <script th:src="@{/static/libs/datepicker/WdatePicker.js}"></script>

    <!-- bootstrap3-dialog  -->
    <script th:src="@{/static/libs/bootstrap3-dialog/js/bootstrap-dialog.min.js}"></script>
    <!-- bootstrap datepicker -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-datepicker.min.js}"></script>
    <!-- bootstrap color picker -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-colorpicker.min.js}"></script>
    <!-- bootstrap time picker -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-timepicker.min.js}"></script>
    <!-- SlimScroll -->
    <script th:src="@{/static/libs/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
    <!-- PACE -->
    <script th:src="@{/static/libs/pace.min.js}"></script>
    <!-- zTree script -->
    <script th:src="@{/static/libs/jquery-ztree/jquery.ztree.all.min.js}"></script>
    <!-- Bootstrap-notify-3.1.3 -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-notify.min.js}"></script>
    <!-- Bootstrap-validator-0.11.9 -->
    <script th:src="@{/static/libs/bootstrap/bootstrap-validator.min.js}"></script>
    <!-- bootstrap-switch-v3.3.5-->
    <script th:src="@{/static/libs/bootstrap-switch-v3.3.5/js/bootstrap-switch.min.js}"></script>
    <!-- iCheck -->
    <script th:src="@{/static/libs/iCheck/icheck.min.js}"></script>
    <!-- ckedit -->
    <script th:src="@{/static/libs/ckeditor/ckeditor.js}"></script>
    <!-- AdminLTE for menu purposes -->
    <script th:src="@{/static/js/right-menu-color.js?v=1.0.1}"></script>
    <!-- jquery.base64 -->
    <script th:src="@{/static/libs/jquery-base64/jquery.base64.js?v=1.0.2}"></script>

    <script th:src="@{/static/js/admin.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/static/js/common/utils.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/static/libs/jquery-editable-select/jquery.editable-select.min.js}"></script>
    <script th:src="@{/static/libs/jquery-uploadifive/jquery.uploadifive.js}"></script>

    <script th:src="@{/project/common/common-editable.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/project/common/common-formatter.js?v=1.0.1}" th:inline="javascript"></script>
    <script th:src="@{/project/common/common-function.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/project/common/common-chart.js?v=1.0.1}"  th:inline="javascript"></script>
    <script th:src="@{/static/libs/jqFullCalendar/js/moment.min.js}"></script>
    <script th:src="@{/static/libs/jqFullCalendar/js/fullcalendar.min.js}"></script>
    <script th:src="@{/static/libs/jqFullCalendar/js/calendar.js}"></script>
    <script th:src="@{/static/libs/echart4.7.0/echarts.common.min.js}"></script>
    <script th:src="@{/static/libs/echart4.7.0/echarts.min.js}"></script>
    <script th:src="@{/static/libs/jquery-liMarquee/js/jquery.liMarquee.js}"></script>
    </body>
    <script th:inline="javascript">

        var CURRENTUSERID = [[${CURRENTUSERID}]];
        var CURRENTUSERNAME = [[${CURRENTUSERNAME}]];
        var CURRENTDEPTID = [[${CURRENTDEPTID}]];
        var CURRENTDEPTNAME = [[${CURRENTDEPTNAME}]];
        var CURRENTCOMPANYID = [[${CURRENTCOMPANYID}]];
        var CURRENTSYSTEMID = [[${CURRENTSYSTEMID}]];
        var CURRENTONEDEPTID = [[${CURRENTONEDEPTID}]];
        var CURRENTTWODEPTID = [[${CURRENTTWODEPTID}]];

        $(function () {
            var navinit=0;
            $('#mainNav').find("li").each(function() {
                if(navinit++==0) $(this).css("background-color"," #357ca5").css("color","#fff");
                $(this).click(function() {
                    $('#mainNav').find("li").css("background-color","").css("color","");
                    $(this).css("background-color"," #357ca5").css("color","#fff");
                    if($(this).attr("module-id")!=null){
                        $(".sidebar-menu div[id^='menu-']").hide();
                        $("#"+$(this).attr("module-id")).show();
                        if($(this).attr("module-id")=="menu-home") {//点击首页
                            $.myAdmin.loadContent([[${HOMEPAGE}]]);
                        }
                    }
                })
            })
            var url = window.location.href;
            if(url.indexOf('#') < 0){
                $.myAdmin.loadContent([[${HOMEPAGE}]]);
            }
//            var item = {'id':'1','name':'首页','closable':false};
//            closableTab.addTab(item);
        });


        //Grid行内按钮，需要对事件定义页面类型为 gridbtn
        function gridButtonFormatter(value, row, index) {
            // alert(eventGridBtn);
            if(eventGridBtn==null) return value;
            var obj=$("<div>"+eventGridBtn+"</div>");
            obj.find("button[type='button']").each(function(){
                if ($(this).attr("bo-function") != null && $(this).attr("bo-function") != "") {
                    var mothod = $(this).attr('onclick');
                    if(mothod!=null&&mothod.trim().indexOf("update(this")>-1||$(this).attr("bo-function").indexOf("auditing:")>-1) {//前端调用方法必须是update(this)或者含有auditing:
                        eval("var parames=" + $(this).attr("bo-function"));
                            for(var key in parames) {//第一个值相同,则不让触发
                                if(row[key]==parames[key]) {
                                    $(this).prop('disabled',true);
                                   // $(this).remove();
                                    break;
                                }
                            }
                   }
                }
            });
            return   obj.html().replaceAll("index",index);
        }

        //form save
        function saveFile(that){
            var els=$("#infoform").find("input");
            for(var i=0;i<els.length;i++) {
                var obj=els[i];
                var required = $(obj).attr("required");
                if(required && required == "required") {
                    if(validateEl(obj,true)==false) {
                        $(obj).focus();
                        return ;
                    }
                }

            } ;
            var data= $("#infoform").parseForm() ;
            $("#infoform").find(":checkbox").each(function(){//处理复选框取值转换为1 0
                var name=$(this).attr("name")+"";
                data[name] = $(this).prop('checked')?"1":"0"  ;
            });
            //alert(JSON.stringify(data));
            var url='/common/savefile';
            if(that!=null){//指定了执行自定义类
                if($(that).attr("bo-function")!=null&&$(that).attr("bo-function")!=""){
                    url=$(that).attr("bo-function");
                }
            }
            var orgName= $("#infoform").find("input[id='file']").attr("name");
            $("#infoform").find("input[id='file']").attr("name","fileName");
            var formData = new FormData($("#infoform")[0]);
            // var docFile=$("#infoform").find("input[id='file']").files[0];
            // formData.append("fileName",docFile);

            $.ajax({
                async: false,
                type: "POST",
                url: url+'?funId='+funId+"&fileColumn="+orgName,
                data: formData,
                dataType: "JSON",
                mimeType: "multipart/form-data",
                contentType: false,
                cache: false,
                processData: false,
                success: function (data) {
                    if (data.success) {
                        $.myNotify.success(data.msg)
                        $("#infoform").find("input[id='file']").attr("name",orgName);
                    } else {
                        $.myNotify.warning(data.msg)
                    }
                }
            });

        }

    </script>
</html>